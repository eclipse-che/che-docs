// Module included in the following assemblies:
//
// installing-{prod-id-short}-on-microsoft-azure
:page-liquid:

[id="installing-{prod-id-short}-on-azure-using-the-{prod-cli}-command_{context}"]
= Installing {prod-short} on Azure using the {prod-cli} command

.Prerequisites

* The `{prod-cli}` management tool is available. See link:{site-baseurl}che-7/using-the-{prod-cli}-management-tool/[Using the `{prod-cli}` management tool].
* The `helm` tool is available, with version 2.15 or higher. See link:https://helm.sh/[Helm].

.Procedure

* To install {prod-short}, run the following `{prod-cli}` command:
+
[subs="+attributes"]
----
$ {prod-cli} chectl server:start --installer=helm --platform=k8s \                           --domain=azr.my-ide.cloud --multiuser
â€º Current Kubernetes context: '{prod}'
  âœ” Verify Kubernetes API...OK
  âœ” ğŸ‘€  Looking for an already existing {prod} instance
    âœ” Verify if {prod} is deployed into namespace "che"...it is not
  âœ” âœˆï¸  Kubernetes preflight checklist
    âœ” Verify if kubectl is installed
    âœ” Verify remote kubernetes status...done.
    âœ” Check Kubernetes version: Found v1.16.10.
    âœ” Verify domain is set...set to azr.my-ide.cloud.
    â†“ Check if cluster accessible [skipped]
Eclipse Che logs will be available in '/var/folders/tg/_5rxbhmj4xncz4szvpgswrmc0000gn/T/chectl-logs/1596019249675'
  âœ” Start following logs
    â†“ Start following Operator logs [skipped]
    âœ” Start following {prod} logs...done
    âœ” Start following Postgres logs...done
    âœ” Start following Keycloak logs...done
    âœ” Start following Plugin registry logs...done
    âœ” Start following Devfile registry logs...done
  âœ” Start following events
    âœ” Start following namespace events...done
 â€º   Warning: Consider using the more reliable 'OLM' installer when deploying a stable release of Eclipse Che (--installer=olm).
  âœ” ğŸƒâ€  Running Helm to install {prod}
    âœ” Verify if helm is installed
    âœ” Check Helm Version: Found v3.1.2+gd878d4d
    âœ” Create Namespace ({prod-namespace})...does already exist.
    âœ” Check Eclipse Che TLS certificate...TLS certificate secret found
    âœ” Check Cluster Role Binding...does not exists.
    âœ” Preparing {prod} Helm Chart...done.
    âœ” Updating Helm Chart dependencies...done.
    âœ” Deploying {prod} Helm Chart...done.
  âœ” âœ…  Post installation checklist
    âœ” PostgreSQL pod bootstrap
      âœ” scheduling...done.
      âœ” downloading images...done.
      âœ” starting...done.
    âœ” Devfile registry pod bootstrap
      âœ” scheduling...done.
      âœ” downloading images...done.
      âœ” starting...done.
    âœ” Plugin registry pod bootstrap
      âœ” scheduling...done.
      âœ” downloading images...done.
      âœ” starting...done.
    âœ” {prod} pod bootstrap
      âœ” scheduling...done.
      âœ” downloading images...done.
      âœ” starting...done.
    âœ” Retrieving {prod} server URL... https://{prod-namespace}-{prod-namespace}.azr.my-ide.cloud
    âœ” {prod} status check
  âœ” Show important messages
    âœ” Autogenerated Keycloak credentials are: "xxx:xxx"
Command server:start has completed successfully.
----

Track installation events with:
[subs="+attributes"]
----
$ kubectl get events --namespace {prod-namespace} --sort-by=.metadata.creationTimestamp
----

{identity-provider} and {prod-short} now have valid wildcard certificates.

image::installation/wildcard-certificates-for-keycloak-che.png[link="{imagesdir}/installation/wildcard-certificates-for-keycloak-che.png"]

.{prod-short} user dashboard
image::installation/che-user-dashboard.png[link="{imagesdir}/installation/che-user-dashboard.png"]
