[id="provisioning-jetbrains-activation-code-for-offline-use_{context}"]
= Provisioning JetBrains activation code for offline use

This section describes how to provision the JetBrains activation code to {prod-short}, when using a JetBrains IDE requesting a registration. You need to generate an activation code and apply it to your product after each subscription renewal.

.Prerequisites

* An active JetBrains account.
* An active personal or organization subscription.
* The `base64` tool is available.

.Procedure

. Retrieve the activation code from the JetBrains account. JetBrains provides a zip archive with two types of the activation code. Use the `<License{nbsp}ID>{nbsp}-{nbsp}for{nbsp}2018.1{nbsp}or{nbsp}later.txt` file. Save the content in the `jetbrains_license.txt` file.

. To define __<base64_encoded_activation_code>__, calculate the base64 encoded version of the content of the activation code.
+
----
$ base64 jetbrains_license.txt
----

. Create a {orch-name} Secret to provision the activation code to {prod-short}.
+
[source,yaml,subs="+quotes,+attributes,+macros"]
----
apiVersion: v1
kind: Secret
metadata:
  name: jetbrains-offline-activation-code
  labels:
    app.kubernetes.io/component: workspace-secret
    app.kubernetes.io/part-of: che.eclipse.org
  annotations:
    che.eclipse.org/automount-workspace-secret: 'false' <1>
    che.eclipse.org/mount-path: /tmp/
    che.eclipse.org/mount-as: file
data:
  idea.key: __<base64_encoded_activation_code>__
  pycharm.key: __<base64_encoded_activation_code>__
  webstorm.key: __<base64_encoded_activation_code>__
  phpstorm.key: __<base64_encoded_activation_code>__
  goland.key: __<base64_encoded_activation_code>__
----
+
<1> `+che.eclipse.org/automount-workspace-secret: 'false'+`: disables the mounting process until a workspace component explicitly requests it using the `+automountWorkspaceSecrets: true+` property.

. To mount the activation codes into a workspace, update the workspace configuration to set `+automountWorkspaceSecrets: true+`:
+
[source,yaml,subs="+quotes,+attributes,+macros"]
----
components:
  - type: cheEditor
    automountWorkspaceSecrets: true
    reference: "__<URL_to_meta.yaml>__"
----


.Additional resources

* xref:using-an-intellij-based-ide.adoc[]
* link:https://kubernetes.io/docs/concepts/configuration/secret/[{orch-name} Secret Documentation]