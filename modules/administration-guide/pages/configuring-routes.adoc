:_content-type: PROCEDURE
:navtitle: Configuring OpenShift Route
:keywords: administration guide, configuring, routes
:page-aliases: installation-guide:configuring-routes

[id="configuring-routes_{context}"]
= Configuring OpenShift Route to work with Router Sharding

This procedure describes how to configure labels, annotations, and domains for OpenShift Route to work with link:https://docs.openshift.com/container-platform/4.7/networking/ingress-operator.html#nw-ingress-sharding_configuring-ingress[Router Sharding].

.Prerequisites

* An active `oc` session to the destination cluster.
* `{prod-cli}`

.Procedure

* Configure the `CheCluster` custom resource:
+
[source,yaml,subs="+quotes"]
----
spec:
  server:
    cheServerRoute:
      labels: <labels> <1>
      domain: <domain> <2>
      annotations:     <3>
        key1: value1
        key2: value2
    customCheProperties:
      CHE_INFRA_OPENSHIFT_ROUTE_LABELS: <labels> <1>
      CHE_INFRA_OPENSHIFT_ROUTE_HOST_DOMAIN__SUFFIX: <domain> <2>
----
<1> comma separated list of labels that are used by the target ingress controller to filter the set of Routes to service
<2> DNS name serviced by the target ingress controller
<3> unstructured key value map stored with a resource


.Additional resources

* xref:understanding-the-checluster-custom-resource.adoc[]
