[id="configuring-prod-cli-with-environment-variables-to-use-amazon-s3_{context}"]
= Configuring {prod-cli} with environment variables to use Amazon S3

As an alternative to using command-line options for `{prod-cli} server:backup`, you can configure {prod-cli} for Amazon S3 with environment variables that will allow you to run `{prod-cli} server:backup` without having to enter those arguments as options.

.Prerequisites
* Configured Amazon S3. See xref:supported-restic-compatible-backup-servers.adoc[].
* Created backup repository. See link:https://restic.readthedocs.io/en/latest/030_preparing_a_new_repo.html[Preparing a new repository].
* Created backup repository password. See link:https://restic.readthedocs.io/en/latest/030_preparing_a_new_repo.html[Preparing a new repository].
+
include::snip_warning-about-losing-backup-repo-password.adoc[]

.Procedure

* Set the following environment variables:
** `BACKUP_REPOSITORY_URL` for the backup repository.
** `BACKUP_REPOSITORY_PASSWORD` for the backup repository password.
** `AWS_ACCESS_KEY_ID` for the user’s AWS access key ID.
** `AWS_SECRET_ACCESS_KEY` for the user’s AWS secret access key.
