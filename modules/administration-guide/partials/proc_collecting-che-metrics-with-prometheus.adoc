// monitoring-{prod-id-short}

[id="collecting-{prod-id-short}-metrics-with-prometheus_{context}"]
= Collecting {prod-short} metrics with Prometheus

To use the Prometheus monitoring system to collect, store, and query metrics about {prod-short}:

.Prerequisites

* {prod-short} is exposing metrics on port `8087`. See xref:enabling-and-exposing-{prod-id-short}-metrics_{context}[Enabling and exposing {prod-short} server JVM metrics].

* Prometheus  2.26.0 or later is running. The Prometheus console is running on port `9090` with a corresponding `service` and `route`. See link:https://prometheus.io/docs/introduction/first_steps/[First steps with Prometheus].

.Procedure

* Configure Prometheus to scrape metrics from the `8087` port.
+
.Prometheus configuration
====
include::example$prometheus-config.adoc[]
====

.Verification steps

. View the metrics in the Prometheus console at `http://__<prometheus-url>__/metrics`.

. Query the metrics in the Prometheus console from `http://__<prometheus-url>__/graph`. For more information, see link:https://prometheus.io/docs/introduction/first_steps/#using-the-expression-browser[Using the expression browser].

. Verify that all targets are up by viewing the targets endpoint at `http://__<prometheus-url>__/targets`.

.Additional resources

* link:https://prometheus.io/docs/prometheus/latest/configuration/configuration/[Configuring Prometheus]

* link:https://prometheus.io/docs/prometheus/latest/querying/basics/[Querying Prometheus]

* link:https://prometheus.io/docs/concepts/metric_types/[Prometheus metric types]
