[id="cleaning-up-postgresql{context}"]
= Cleaning up PostgreSQL

.Procedure

include::partial$snip_scaling-down-che.adoc[]

include::partial$snip_scaling-down-keycloak.adoc[]

include::partial$snip_finding-postgresql-pod.adoc[]

include::partial$snip_finding-che-database-name.adoc[]

. Drop {identity-provider} database:
+
[subs="+quotes,+attributes"]
----
{orch-cli} exec -it $POSTGRES_POD -n {prod-namespace}  -- bash  -c "dropdb keycloak"
----

. Create {identity-provider} database:
+
[subs="+quotes,+attributes"]
----
{orch-cli} exec -it $POSTGRES_POD -n {prod-namespace}  -- bash  -c "psql postgres -tAc \"CREATE DATABASE keycloak\""
----

. Drop {prod-short} database:
+
[subs="+quotes,+attributes"]
----
{orch-cli} exec -it $POSTGRES_POD -n {prod-namespace}  -- bash  -c "dropdb $CHE_POSTGRES_DB"
----

. Create {prod-short} database:
+
[subs="+quotes,+attributes"]
----
{orch-cli} exec -it $POSTGRES_POD -n {prod-namespace}  -- bash  -c "psql postgres -tAc \"CREATE DATABASE $CHE_POSTGRES_DB\""
----

