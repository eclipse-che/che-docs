// deploying-the-registries

[id="configuring-external-postgresql_{context}"]
= Configuring external PostgreSQL

To make workspace metadata and user information persistent, you must configure the external PostgreSQL.

.Procedure

. Define the values of the following placeholders:
+
* `<database-user>`:: {prod-short} server database user name
* `<database-password>`:: {prod-short} server database password
* `<database>`:: {prod-short} server database name 

. Use the following SQL script to create a user and a database for the {prod-short} server to make workspace metadata persistent:
+
[subs="+quotes,+attributes"]
----
CREATE USER <database-user> WITH PASSWORD '<database-password>' 
CREATE DATABASE <database>                                     
GRANT ALL PRIVILEGES ON DATABASE <database> TO <database-user>
ALTER USER <database-user> WITH SUPERUSER
----

. Define the value of the following placeholder:
+
`<identity-database-password>`:: {identity-provider} database password

. Use the following SQL script to create a database for the {identity-provider} back end to make user information persistent:
+
[subs="+quotes,+attributes"]
----
CREATE USER keycloak WITH PASSWORD '<identity-database-password>' 
CREATE DATABASE keycloak
GRANT ALL PRIVILEGES ON DATABASE keycloak TO keycloak
----